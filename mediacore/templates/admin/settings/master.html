<!--! This file is a part of MediaCore, Copyright 2009 Simple Station Inc.

	MediaCore is free software: you can redistribute it and/or modify
	it under the terms of the GNU General Public License as published by
	the Free Software Foundation, either version 3 of the License, or
	(at your option) any later version.

	MediaCore is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU General Public License for more details.

	You should have received a copy of the GNU General Public License
	along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip="">

<body py:match="body" py:attrs="h.append_class_attr(select('@*'), 'menu-settings-on')">
	<!--! We're just adding the 'menu-settings-on' class to highlight the right nav button -->
	<div py:replace="select('*|text()')" />
</body>

<xi:include href="../master.html" />

<head py:match="head">
	<meta py:replace="select('*')"/>
	<link href="${h.url_for('/admin/styles/settings.css')}" media="screen" rel="stylesheet" type="text/css" />
</head>

<div id="body" py:match="div[@id='body']">
	<div class="lft-column33" py:with="
		current_url = h.url_for();
		plugin_links = sorted(g.events.plugin_settings_links(), key=lambda (text, link): text.lower());
	">
		<div class="box">
			<h1 class="box-head">Settings</h1>
			<ul class="box-content settings-menu" py:with="links = [
				('Analytics', h.url_for(controller='/admin/settings', action='analytics')),
				('Comments', h.url_for(controller='/admin/settings', action='comments')),
				('Data API', h.url_for(controller='/admin/settings', action='api')),
				('Display', h.url_for(controller='/admin/settings', action='display')),
				('Notifications', h.url_for(controller='/admin/settings', action='notifications')),
				('Popularity', h.url_for(controller='/admin/settings', action='popularity')),
				('Storage Engines', h.url_for(controller='/admin/storage')),
				('Upload', h.url_for(controller='/admin/settings', action='upload')),
			]">
				<li py:for="text, link in links">
					<a href="${link}" class="${current_url.startswith(link) and 'selected' or None}">${text}</a>
				</li>
			</ul>
		</div>
		<div class="box" py:if="plugin_links">
			<h1 class="box-head">Plugins</h1>
			<ul class="box-content settings-menu">
				<li py:for="text, link in plugin_links">
					<a href="${link}" class="${current_url.startswith(link) and 'selected' or None}">${text}</a>
				</li>
			</ul>
		</div>
	</div>
	<div class="rgt-column66">
		<div py:replace="select('*|text()')" />
	</div>
</div>

</html>
